#Ubuntu VM created by Google compute engine
## https://docs.travis-ci.com/user/reference/overview/
dist: trusty

# If you need a more customizable environment running in a virtual machine :ubuntu environment
sudo: required

services:
 - docker

 #Specifies language
language: go

# language version
go:
- 1.8.1

install:
- bash scripts/install_dependencies.sh


before_script:
# creates executable file
- go build



jobs:
  include:
  #stage 1 to execute positive test case
    - stage: positive_testscripts
      script:
        - bash scripts/positive_testcase.sh

  # stage 2 to execute negative test case

    - stage: negative_testscripts
      script:
        - bash scripts/negative_testcase.sh

  # stage 3 to execute update test case

    - stage: negative_query_testscripts
      script:
        - bash scripts/negative_query_testcases.sh

  # stage 4 to execute update test case

    - stage: modify_resource_testscripts
      script:
        - bash scripts/modify_testcases.sh

notifications:

  email:
    recipients:
      - aashish.mohankar@click2cloud.net
  ##  - abhijeet.choudhari@click2cloud.net
  ##  - apurva.dhoble@click2cloud.net
  ##  - disha.wani@click2cloud.net
  ##  - sapan.vaswani@click2cloud.net
    on_success: always
    on_failure: always


branches:
  only:
  - travis_sfs

#to cache terraform installation directories
cache:
  directories:
    - ./usr/local/bin/


matrix:
# the build wonâ€™t be marked as finished until they have completed, use fast_finish to mark them as finish test
    fast_finish: true
    allow_failures:
    - stage: negative_testscripts
    - stage: negative_query_testscripts



